function initVideoPlayer(t, e) {
    var a = $(".card-mask").height(),
    i = $(".swiper-container").height();
    GY.wd.player.init({
        config: {
            vid: t,
            containerId: "video-container",
            width: "100%",
            height: i,
            poster: "http://" + e.split("//")[1]
        },
        error: function(t) {
            console.error(t.msg)
        },
        success: function(t) {
            player = t,
            $(".txp_bottom").css({
                bottom: a
            }),
            $(".txp_btn_play_lg").data("mta", "dtl").data("mta-param", "28")
        }
    })
}
var GYST = {
    landScape: function(t) {
        function e() {
            var t = "." + i.option.prefix + "-landscape{width:100%; height:100%; background:" + i.option.bgcolor + ";position: fixed; left:0; right:0; top: 0; bottom:0;z-index:" + i.option.zIndex + "; display:none; text-align: center;}." + i.option.prefix + "-landscape-box{position: relative; margin-left: auto; margin-right: auto; top: 50%; transform:translateY(-50%); -webkit-transform:translateY(-50%);}." + i.option.prefix + "-landscape span{font-size:16px;display:block;color:" + i.option.txtColor + "; text-align:center;width: 100%;padding-top: 40px; line-height:2;}." + i.option.prefix + "-landscape img{-webkit-animation: " + i.option.prefix + "-landscapeAni 1.2s ease infinite alternate;animation: " + i.option.prefix + "-landscapeAni 1.2s ease infinite alternate;}@-webkit-keyframes " + i.option.prefix + "-landscapeAni{0% {-webkit-transform:rotate(90deg);}30% {-webkit-transform:rotate(90deg);}70%{-webkit-transform:rotate(0deg);}100% {-webkit-transform:rotate(0deg);}}@keyframes " + i.option.prefix + "-landscapeAni{0% {transform:rotate(90deg);}30% {transform:rotate(90deg);}70%{transform:rotate(0deg);}100% {transform:rotate(0deg);}}",
            e = document.createElement("style");
            e.type = "text/css",
            e.textContent = t,
            document.getElementsByTagName("HEAD").item(0).appendChild(e)
        }
        function a() {
            var t = document.createElement("div");
            t.className = i.option.prefix + "-landscape",
            t.id = i.option.prefix + "-landscape",
            t.innerHTML = '<div class="' + i.option.prefix + '-landscape-box"><img src="' + i.option.pic + '" id="' + i.option.prefix + '-landscape-pic" style="display:inline-block;" /><span>' + i.option.txt + "</span></div>",
            document.body.appendChild(t);
            var e = (i.pic, new Image);
            e.src = i.option.pic,
            e.onload = function() {
                document.getElementById(i.option.prefix + "-landscape-pic").width = parseInt(e.width / i.option.picZoom),
                document.getElementById(i.option.prefix + "-landscape-pic").height = parseInt(e.height / i.option.picZoom)
            }
        }
        var i = this;
        i.option = {
            pic: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAAB4CAMAAADVLa6HAAABCFBMVEUAAAAAAAAAAABWVlYAAADFxcUAAACKioovLy8AAAAAAAAAAAC+vr6+vr6EhIQAAAALCwsBAQEGBgbIyMjGxsYAAADGxsbHx8cAAADHx8fAwMCoqKi9vb1SUlIGBgbHx8fFxcW0tLSxsbGgoKC7u7slJSVeXl6ysrLFxcW/v7+7u7uoqKiRkZEUFBQFBQWMjIxxcXHExMTExMTCwsK6urq2trbBwcHExMSsrKzExMS1tbWUlJTDw8O0tLSnp6dpaWm9vb1ZWVmDg4PAwMCvr6+Ojo4+Pj4xMTFKSkpnZ2e2trahoaGxsbGfn5+3t7ecnJyvr6+CgoKVlZU9PT1WVlasrKy8vLzJycmXdzvDAAAAV3RSTlMAARMjBL8WfEggDinGSGgeBwsj++IU8vkb9N6oeE0x7tBMt49nLykPxtLEmoM9NxcG6dvl0Ma6sLCnnYmHb11cW1hSUUFAOzo2NCQcqpmOfXx1bUY9Ny21pUe+AAAC6klEQVR42uzaV2/bMBSGYVI9kRs6aanhWc/YiffKHs1oM5t0r+///5MyrgvXqR0XuZIP+N5IF7rQAxIHAkQxTpJWDo+URySmRPri48oghcUvKDbef/UT3j9Mqaub4FSydePqSSb9KAGZtU9v3208W/g2Lk8OQ8Ns+4r+NlZTSFbWXaWJSC58BuGdlIC1dYfGxhywc+V6JPhEOhdgZ6yUZ8CruMOJOGSWM1iLqxHrNmOMiptRCFkOcOTr3/e72C6wW8ehLIfkN3cou0DqTZqjUYh+yexRT5j2sB/3pGDZKjKdBAlRC8B1IYWQm4gtG9w5sgVn2kKS5yxAcwbmazNgvfvLvrlMaQmL0JWSj+/XbEEJcYCKrxcX+dx9FHmLVNcRYhftWcj2ddS/ZOcia0AnIY0ltjwDGfO1jHZzkcI8MULSDORy1KfufyFdi7TISGSRFmmR0coiLdIio9UTkMMfPh5Jzkiqhkg1vyeIM/IcK63DTCOuJGPkXlhIe8c4dYkxcmklrsQqXry0yEhlkRZpkdHKIi3SIqOVRVqkRUYri+SJJK2U4zhKE1sk9Y6bYRAMmpUb1yOeyH6uiFGp1rpDkh9S3tWBbMWc17383DB3eVdLdsi7EMmY72gy6XKIYt4lbsh+HVv59J+BI3slZK8TxAyZQzKfpvGc7YX3JwclK2StiCPfmMaVEeRdYoU8w1Y3MfGuVMcHX7NCHgyPtU5UxXZBsULW8eXhq/7EoOuwQoY4fXhkt4agwwv5q707OGEYiKEg2kUgpyQtpBn334nB+OgChN78DgYWe1eg+Z8nyGMZ5PfpuL6WHVfiw0P8QojLAHGtMy7oxFPLeDQT4497kPV/7x5kGSNJZLgcZJCjE2SQQc5KkEEGOStButsExF4IseFD7GoZW3dBjkyQQQY5K0EGGeSsBClCrle6EXI+QrNICDMJ9SkhsV2tI/5dOmJFLE0owgnZu6HtJwoYjCoNoxTFqLcxiop2V06dXT9t25ovKx4AAAAASUVORK5CYII=",
            mode: "portrait",
            bgcolor: "#333",
            txtColor: "#FFFFFF",
            prefix: "page",
            picZoom: 2,
            zIndex: 9999999,
            init: !1,
            landback: !1
        },
        // t.mode && "portrait" != t.mode ? i.option.txt = "为了更好的体验，请使用横屏浏览": i.option.txt = "为了更好的体验，请使用竖屏浏览";
        for (var n in t)"" != t[n] && (i.option[n] = t[n]);
        e(),
        a();
        var o = document.getElementById(i.option.prefix + "-landscape"),
        r = t.mode ? t.mode: i.option.mode,
        s = document.documentElement.clientWidth || window.innerWidth,
        l = document.documentElement.clientHeight || window.innerHeight,
        c = s > l ? "landscape": "portrait",
        d = c != r;
        c != r ? o.style.display = "block": o.style.display = "none";
        var _ = function() {
            document.activeElement.blur();
            var t = window.orientation;
            switch (t) {
            case 90:
            case - 90 : t = "landscape";
                break;
            default:
                t = "portrait"
            }
            t != r ? o.style.display = "block": o.style.display = "none"
        };
        window.addEventListener("DOMContentLoaded",
        function() {
            window.addEventListener("orientationchange",
            function() {
                d && location.reload(!0),
                _()
            },
            !1)
        },
        !1)
    },
    fastClick: function() {
        "use strict";
        function t(e, i) {
            function n(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            }
            var o;
            if (i = i || {},
            this.trackingClick = !1, this.trackingClickStart = 0, this.targetElement = null, this.touchStartX = 0, this.touchStartY = 0, this.lastTouchIdentifier = 0, this.touchBoundary = i.touchBoundary || 10, this.layer = e, this.tapDelay = i.tapDelay || 200, this.tapTimeout = i.tapTimeout || 700, !t.notNeeded(e)) {
                for (var r = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"], s = this, l = 0, c = r.length; l < c; l++) s[r[l]] = n(s[r[l]], s);
                a && (e.addEventListener("mouseover", this.onMouse, !0), e.addEventListener("mousedown", this.onMouse, !0), e.addEventListener("mouseup", this.onMouse, !0)),
                e.addEventListener("click", this.onClick, !0),
                e.addEventListener("touchstart", this.onTouchStart, !1),
                e.addEventListener("touchmove", this.onTouchMove, !1),
                e.addEventListener("touchend", this.onTouchEnd, !1),
                e.addEventListener("touchcancel", this.onTouchCancel, !1),
                Event.prototype.stopImmediatePropagation || (e.removeEventListener = function(t, a, i) {
                    var n = Node.prototype.removeEventListener;
                    "click" === t ? n.call(e, t, a.hijacked || a, i) : n.call(e, t, a, i)
                },
                e.addEventListener = function(t, a, i) {
                    var n = Node.prototype.addEventListener;
                    "click" === t ? n.call(e, t, a.hijacked || (a.hijacked = function(t) {
                        t.propagationStopped || a(t)
                    }), i) : n.call(e, t, a, i)
                }),
                "function" == typeof e.onclick && (o = e.onclick, e.addEventListener("click",
                function(t) {
                    o(t)
                },
                !1), e.onclick = null)
            }
        }
        var e = navigator.userAgent.indexOf("Windows Phone") >= 0,
        a = navigator.userAgent.indexOf("Android") > 0 && !e,
        i = /iP(ad|hone|od)/.test(navigator.userAgent) && !e,
        n = i && /OS 4_\d(_\d)?/.test(navigator.userAgent),
        o = i && /OS [6-7]_\d/.test(navigator.userAgent),
        r = navigator.userAgent.indexOf("BB10") > 0;
        t.prototype.needsClick = function(t) {
            switch (t.nodeName.toLowerCase()) {
            case "button":
            case "select":
            case "textarea":
                if (t.disabled) return ! 0;
                break;
            case "input":
                if (i && "file" === t.type || t.disabled) return ! 0;
                break;
            case "label":
            case "iframe":
            case "video":
                return ! 0
            }
            return /\bneedsclick\b/.test(t.className)
        },
        t.prototype.needsFocus = function(t) {
            switch (t.nodeName.toLowerCase()) {
            case "textarea":
                return ! 0;
            case "select":
                return ! a;
            case "input":
                switch (t.type) {
                case "button":
                case "checkbox":
                case "file":
                case "image":
                case "radio":
                case "submit":
                    return ! 1
                }
                return ! t.disabled && !t.readOnly;
            default:
                return /\bneedsfocus\b/.test(t.className)
            }
        },
        t.prototype.sendClick = function(t, e) {
            var a, i;
            document.activeElement && document.activeElement !== t && document.activeElement.blur(),
            i = e.changedTouches[0],
            a = document.createEvent("MouseEvents"),
            a.initMouseEvent(this.determineEventType(t), !0, !0, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null),
            a.forwardedTouchEvent = !0,
            t.dispatchEvent(a)
        },
        t.prototype.determineEventType = function(t) {
            return a && "select" === t.tagName.toLowerCase() ? "mousedown": "click"
        },
        t.prototype.focus = function(t) {
            var e;
            i && t.setSelectionRange && 0 !== t.type.indexOf("date") && "time" !== t.type && "month" !== t.type ? (e = t.value.length, t.setSelectionRange(e, e)) : t.focus()
        },
        t.prototype.updateScrollParent = function(t) {
            var e, a;
            if (e = t.fastClickScrollParent, !e || !e.contains(t)) {
                a = t;
                do {
                    if (a.scrollHeight > a.offsetHeight) {
                        e = a,
                        t.fastClickScrollParent = a;
                        break
                    }
                    a = a.parentElement
                } while ( a )
            }
            e && (e.fastClickLastScrollTop = e.scrollTop)
        },
        t.prototype.getTargetElementFromEventTarget = function(t) {
            return t.nodeType === Node.TEXT_NODE ? t.parentNode: t
        },
        t.prototype.onTouchStart = function(t) {
            var e, a, o;
            if (t.targetTouches.length > 1) return ! 0;
            if (e = this.getTargetElementFromEventTarget(t.target), a = t.targetTouches[0], i) {
                if (o = window.getSelection(), o.rangeCount && !o.isCollapsed) return ! 0;
                if (!n) {
                    if (a.identifier && a.identifier === this.lastTouchIdentifier) return t.preventDefault(),
                    !1;
                    this.lastTouchIdentifier = a.identifier,
                    this.updateScrollParent(e)
                }
            }
            return this.trackingClick = !0,
            this.trackingClickStart = t.timeStamp,
            this.targetElement = e,
            this.touchStartX = a.pageX,
            this.touchStartY = a.pageY,
            t.timeStamp - this.lastClickTime < this.tapDelay && t.preventDefault(),
            !0
        },
        t.prototype.touchHasMoved = function(t) {
            var e = t.changedTouches[0],
            a = this.touchBoundary;
            return Math.abs(e.pageX - this.touchStartX) > a || Math.abs(e.pageY - this.touchStartY) > a
        },
        t.prototype.onTouchMove = function(t) {
            return ! this.trackingClick || ((this.targetElement !== this.getTargetElementFromEventTarget(t.target) || this.touchHasMoved(t)) && (this.trackingClick = !1, this.targetElement = null), !0)
        },
        t.prototype.findControl = function(t) {
            return void 0 !== t.control ? t.control: t.htmlFor ? document.getElementById(t.htmlFor) : t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")
        },
        t.prototype.onTouchEnd = function(t) {
            var e, r, s, l, c, d = this.targetElement;
            if (!this.trackingClick) return ! 0;
            if (t.timeStamp - this.lastClickTime < this.tapDelay) return this.cancelNextClick = !0,
            !0;
            if (t.timeStamp - this.trackingClickStart > this.tapTimeout) return ! 0;
            if (this.cancelNextClick = !1, this.lastClickTime = t.timeStamp, r = this.trackingClickStart, this.trackingClick = !1, this.trackingClickStart = 0, o && (c = t.changedTouches[0], d = document.elementFromPoint(c.pageX - window.pageXOffset, c.pageY - window.pageYOffset) || d, d.fastClickScrollParent = this.targetElement.fastClickScrollParent), s = d.tagName.toLowerCase(), "label" === s) {
                if (e = this.findControl(d)) {
                    if (this.focus(d), a) return ! 1;
                    d = e
                }
            } else if (this.needsFocus(d)) return t.timeStamp - r > 100 || i && window.top !== window && "input" === s ? (this.targetElement = null, !1) : (this.focus(d), this.sendClick(d, t), i && "select" === s || (this.targetElement = null, t.preventDefault()), !1);
            return ! (!i || n || (l = d.fastClickScrollParent, !l || l.fastClickLastScrollTop === l.scrollTop)) || (this.needsClick(d) || (t.preventDefault(), this.sendClick(d, t)), !1)
        },
        t.prototype.onTouchCancel = function() {
            this.trackingClick = !1,
            this.targetElement = null
        },
        t.prototype.onMouse = function(t) {
            return ! this.targetElement || ( !! t.forwardedTouchEvent || (!t.cancelable || (!(!this.needsClick(this.targetElement) || this.cancelNextClick) || (t.stopImmediatePropagation ? t.stopImmediatePropagation() : t.propagationStopped = !0, t.stopPropagation(), t.preventDefault(), !1))))
        },
        t.prototype.onClick = function(t) {
            var e;
            return this.trackingClick ? (this.targetElement = null, this.trackingClick = !1, !0) : "submit" === t.target.type && 0 === t.detail || (e = this.onMouse(t), e || (this.targetElement = null), e)
        },
        t.prototype.destroy = function() {
            var t = this.layer;
            a && (t.removeEventListener("mouseover", this.onMouse, !0), t.removeEventListener("mousedown", this.onMouse, !0), t.removeEventListener("mouseup", this.onMouse, !0)),
            t.removeEventListener("click", this.onClick, !0),
            t.removeEventListener("touchstart", this.onTouchStart, !1),
            t.removeEventListener("touchmove", this.onTouchMove, !1),
            t.removeEventListener("touchend", this.onTouchEnd, !1),
            t.removeEventListener("touchcancel", this.onTouchCancel, !1)
        },
        t.notNeeded = function(t) {
            var e, i, n, o;
            if ("undefined" == typeof window.ontouchstart) return ! 0;
            if (i = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1]) {
                if (!a) return ! 0;
                if (e = document.querySelector("meta[name=viewport]")) {
                    if (e.content.indexOf("customer-scalable=no") !== -1) return ! 0;
                    if (i > 31 && document.documentElement.scrollWidth <= window.outerWidth) return ! 0
                }
            }
            if (r && (n = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/), n[1] >= 10 && n[2] >= 3 && (e = document.querySelector("meta[name=viewport]")))) {
                if (e.content.indexOf("customer-scalable=no") !== -1) return ! 0;
                if (document.documentElement.scrollWidth <= window.outerWidth) return ! 0
            }
            return "none" === t.style.msTouchAction || "manipulation" === t.style.touchAction || (o = +(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1], !!(o >= 27 && (e = document.querySelector("meta[name=viewport]"), e && (e.content.indexOf("customer-scalable=no") !== -1 || document.documentElement.scrollWidth <= window.outerWidth))) || ("none" === t.style.touchAction || "manipulation" === t.style.touchAction))
        },
        t.attach = function(e, a) {
            return new t(e, a)
        },
        "function" == typeof define && "object" == typeof define.amd && define.amd ? define(function() {
            return t
        }) : "undefined" != typeof module && module.exports ? (module.exports = t.attach, module.exports.FastClick = t) : window.FastClick = t
    },
    _stopScroll: function() {
        event.preventDefault()
    },
    disableScroll: function() {
        document.addEventListener("touchmove", this._stopScroll, !1)
    },
    enableScroll: function() {
        document.removeEventListener("touchmove", this._stopScroll)
    },
    dialogAction: function(t) {
        var e = this,
        a = {
            rootEle: "#pageContainer",
            wrapClass: ".dialog-wrapper",
            openClass: ".j-openDialog",
            closeClass: ".j-closeDialog"
        };
        for (var i in t)"" != t[i] && (a[i] = t[i]);
        $(a.rootEle).on("click", a.openClass,
        function(t) {
            console.log("###PageContainer;;;;");
            var a = $("#" + $(this).data("dialogid"));
            a.show().addClass("show"),
            "scroll" != a.data("scroll") && e.disableScroll()
        }).on("click", a.closeClass,
        function() {
            var t = $(this).closest(a.wrapClass);
            t.addClass("hide"),
            "scroll" != t.data("scroll") && e.enableScroll()
        }).on("animationEnd webkitAnimationEnd", a.wrapClass,
        function() {
            $(this).hasClass("hide") && $(this).hide().removeClass("show hide")
        })
    }
};
GYST.landScape({}),
GYST.fastClick(),
$(function() {
    GYST.dialogAction({})
});
var __extends = this && this.__extends ||
function() {
    var t = Object.setPrototypeOf || {
        __proto__: []
    }
    instanceof Array &&
    function(t, e) {
        t.__proto__ = e
    } ||
    function(t, e) {
        for (var a in e) e.hasOwnProperty(a) && (t[a] = e[a])
    };
    return function(e, a) {
        function i() {
            this.constructor = e
        }
        t(e, a),
        e.prototype = null === a ? Object.create(a) : (i.prototype = a.prototype, new i)
    }
} (),
player;
window.MTA_NOT_AUTO = !0;
var fnMain = function() {
    function array_each(t, e) {
        if (t && t.length && e) for (var a = 0,
        i = t.length; a < i; a++) e.call(t[a], a, t[a], t)
    }
    function fromfmt(t, e) {
        t = t || "yyyy-mm-dd";
        var a = [];
        t = t.replace(/([\-\.\*\$\^\+\]\[\}\{\)\(\\])/gi, "\\$1");
        var i = t.replace(/((y{4})|(y{2})|([ymdhis]{1,2}))/g,
        function(t) {
            return console.log("###args:", arguments),
            a.push(t),
            "(\\d{" + t.length + "})"
        }),
        n = new RegExp(i),
        o = n.exec(e),
        r = -1,
        s = 0,
        l = 0,
        c = 0,
        d = 0,
        _ = 0;
        if (o) for (var u = 1,
        p = o.length; u < p; u++) switch (a[u - 1]) {
        case "yyyy":
            r = parseInt(o[u], 10);
            break;
        case "yy":
            r = parseInt(o[u], 10);
            break;
        case "m":
        case "mm":
            s = parseInt(o[u], 10);
            break;
        case "d":
        case "dd":
            l = parseInt(o[u], 10);
            break;
        case "h":
        case "hh":
            c = parseInt(o[u], 10);
            break;
        case "i":
        case "ii":
            u = parseInt(o[u], 10);
            break;
        case "s":
        case "ss":
            _ = parseInt(o[u], 10)
        }
        if (r < 0 || s < 0 || l < 0 || c < 0 || d < 0 || _ < 0) return null;
        try {
            return new Date(r, s - 1, l, c, d, _)
        } catch(g) {
            return null
        }
    }
    function fixUrlProto(t, e) {
        if (void 0 === e && (e = ""), t = $.trim(t), !t) return location.protocol + "//";
        var a = t;
        if (e) ! 0 === e ? a = t.replace(/^http(s)?:/gi, location.protocol) : (e = ($.trim(e) || location.protocol).toLowerCase(), ":" != e.charAt(e.length - 1) && (e += ":"), /^http(s)?:/gi.test(a) ? a = a.replace(/^http(s)?:/gi, e) : ("//" != a.substr(0, 2) && (a = "//" + a), a = e + a));
        else {
            if (/^http(s)?:/gi.test(t)) return a;
            "//" != a.substr(0, 2) && (a = "//" + a),
            a = location.protocol + a
        }
        return a
    }
    function getQueryObj(t) {
        var e = {};
        if (t = $.trim(t)) for (var a = /(\?|&)([^=$#]+)=([^=&#]+)/gi,
        i = void 0; i = a.exec(t);) e[i[2]] = i[3];
        return e
    }
    function addHashParams(t, e) {
        var a = $.trim(t || "");
        if (!e) return a;
        var i = "";
        if (t.indexOf("#") > -1) {
            if (l = t.split("#"), t = l[0], i = l[1], i) try {
                i = decodeURIComponent(i)
            } catch(n) {}
        } else i = "";
        var o, r, s;
        for (o in e) i ? (r = new RegExp("(\\?|&)" + o + "=([^&#]+)"), s = i.replace(r, "$1" + o + "=" + encodeURIComponent(e[o])), s == i ? i += "&" + o + "=" + encodeURIComponent(e[o]) : i = s) : i = o + "=" + encodeURIComponent(e[o]);
        return i && (a = t + "#" + encodeURIComponent(i)),
        a;
        var l
    }
    function addUrlParams(t, e) {
        var a = $.trim(t || "");
        if (!e) return a;
        var i, n, o;
        for (i in e) n = new RegExp("(\\?|&)" + i + "=([^&#]+)"),
        o = a.replace(n, "$1" + i + "=" + encodeURIComponent(e[i])),
        o == a ? a.indexOf("#") > -1 ? a = a.replace("#", (a.indexOf("?") > -1 ? "&": "?") + i + "=" + encodeURIComponent(e[i]) + "#") : a += (a.indexOf("?") > -1 ? "&": "?") + i + "=" + encodeURIComponent(e[i]) : a = o;
        return a
    }
    function EncodeTmp(t, e) {
        void 0 === t && (t = ""),
        void 0 === e && (e = null);
        var a = e || 3308;
        t = t || "";
        for (var i = 0,
        n = t.length; i < n; ++i) a += (a << 5) + t.charAt(i).charCodeAt(0);
        return 2147483647 & a
    }
    function _mstorage(t, e, a, i) {
        if (!t) return null;
        if (e = "_gy_dt_" + e, void 0 == a && void 0 == i) {
            var n = t.getItem(e) || "";
            if (n) {
                var o = null;
                try {
                    o = JSON.parse(n)
                } catch(r) {}
                return o && (!o.e || 1e3 * o.e < (new Date).getTime()) ? (t.removeItem(e), o = null) : o && (o = o.v),
                o
            }
            return null
        }
        var s = {
            v: a,
            e: Math.floor((new Date).getTime() / 1e3) + (isNaN(i) ? 864e4: i - 0)
        };
        try {
            t.setItem(e, JSON.stringify(s))
        } catch(r) {
            t.removeItem(e)
        }
        return a
    }
    function sstorage(t, e, a) {
        return _mstorage(window.sessionStorage, t, e, a)
    }
    function lstorage(t, e, a) {
        return _mstorage(window.localStorage, t, e, a)
    }
    function decode(t) {
        for (var e, a = [unescape, decodeURI, decodeURIComponent], i = !1; ! i && a.length;) try {
            e = a.pop()(t),
            i = !0
        } catch(n) {
            e = "",
            i = !1
        }
        return e || t
    }
    function htmlspecialchars(t, e) {
        return t ? (t = t.replace(/>/gi, "&gt;").replace(/</gi, "&lt;").replace(/&/gi, "&amp;"), e && (t = t.replace(/'/gi, "&#039;")), t) : t
    }
    function pieChart(t, e, a) {
        for (var i = [], n = [], o = [], r = [], s = 0; s < t.length; s++) {
            var l = t[s];
            i.push({
                value: l.value,
                name: l.name,
                itemStyle: {
                    emphasis: {
                        borderColor: l.color
                    }
                }
            }),
            n.push({
                value: l.value,
                name: l.name,
                itemStyle: {
                    normal: {
                        color: l.color
                    }
                }
            }),
            o.push({
                value: l.value,
                name: l.name
            }),
            r.push({
                value: l.value,
                name: l.name,
                labelLine: {
                    normal: {
                        lineStyle: {
                            color: l.color
                        }
                    }
                }
            })
        }
        var c, d = {
            series: [{
                type: "pie",
                radius: [78, 78],
                startAngle: 270,
                hoverAnimation: !1,
                data: i,
                minAngle: 5,
                label: {
                    normal: {
                        show: !1
                    }
                },
                itemStyle: {
                    normal: {
                        color: "#FFF",
                        borderColor: "#EEE",
                        borderStyle: "solid",
                        borderWidth: 1
                    },
                    emphasis: {
                        borderWidth: 2
                    }
                }
            },
            {
                type: "pie",
                radius: [33, 59],
                startAngle: 270,
                data: n,
                minAngle: 5,
                label: {
                    normal: {
                        show: !1
                    }
                },
                itemStyle: {
                    emphasis: {
                        borderColor: "#FFF",
                        borderStyle: "solid",
                        borderWidth: 2
                    }
                }
            },
            {
                type: "pie",
                radius: [30, 80],
                startAngle: 270,
                hoverAnimation: !1,
                data: o,
                minAngle: 5,
                label: {
                    normal: {
                        show: !1
                    }
                },
                itemStyle: {
                    normal: {
                        color: "rgba(0,0,0,0)"
                    }
                }
            },
            {
                type: "pie",
                radius: [30, 80],
                startAngle: 270,
                hoverAnimation: !1,
                data: r,
                minAngle: 5,
                label: {
                    normal: {
                        formatter: "{b}\n{c}%"
                    }
                },
                itemStyle: {
                    normal: {
                        color: "rgba(0,0,0,0)"
                    }
                }
            }],
            textStyle: {
                fontFamily: "Dinc",
                fontSize: 13,
                color: "#333333"
            }
        },
        _ = echarts.init(document.getElementById(e));
        _.setOption(d),
        _.on("click",
        function(e) {
            if (3 == e.seriesIndex) {
                for (var a = 0; a < t.length; a++) t[a].name != e.name && _.dispatchAction({
                    type: "downplay",
                    seriesIndex: [0, 1, 2],
                    name: t[a].name
                });
                if (e.name != c) {
                    c = e.name;
                    for (var a = 0; a < 3; a++) a != e.seriesIndex && _.dispatchAction({
                        type: "highlight",
                        seriesIndex: a,
                        name: e.name
                    })
                } else c = "",
                _.dispatchAction({
                    type: "downplay",
                    seriesIndex: [0, 1, 2],
                    name: e.name
                })
            }
        }),
        c = a;
        for (var s = 0; s < t.length; s++) _.dispatchAction({
            type: "highlight",
            seriesIndex: [0, 1, 2, 3],
            name: a
        })
    }
    var IS_DEV_MOD = "test." == location.hostname.toLocaleLowerCase().substr(0, 5) || 1 == GY.Util.uri.getUriPar("dbg") || document.cookie && document.cookie.indexOf("dbg=1") != -1,
    PROJ_LC_V = 1,
    PROJ_MAX_CACHED = 5,
    NUM_MAX_FLOW = 30,
    G_CGI_SWITCH = {
        FINANCE: 1,
        PROCESS: 1,
        FRIENDS: 1,
        MONTH_STAT: 1,
        RANK_CGI: 1,
        TRANS_LIST: 1,
        ATTEST: 1,
        FINANCE_CHART: 0,
        PRO_CGI: 1,
        ENTER_DONATOR: 1
    },
    cgiUrl = GY.Util.uri.getUriPar("_t"),
    IDPAIRS = {
        14170 : "34225",
        14720 : "29590"
    },
    STATIC_SRC = "//ssl.gongyi.qq.com/json_data/data_detail/{1}/detail.{2}.js",
    G_STR_URLS = {
        G_PROJ_BASE_STAT: "//ssl.gongyi.qq.com/cgi-bin/ProjInfoQuery.fcgi",
        G_PROJ_BASE: "//ssl.gongyi.qq.com/cgi-bin/ProjInfoQuery.fcgi",
        RANK_CGI: "//ssl.gongyi.qq.com/cgi-bin/wx_yqj_active_rank_1",
        TRANS_CGI: "//ssl.gongyi.qq.com/cgi-bin/ProjTransQuery.fcgi",
        ATTEST_CGI: "//ssl.gongyi.qq.com/cgi-bin/CGIWXCommentsRead?type=XRBS",
        CKV_GET_CGI: "//ssl.gongyi.qq.com/cgi-bin/ckv_get.fcgi?ckv=0",
        FIANCE_CGI: "//ssl.gongyi.qq.com/cgi-bin/OrgHomeClarity.fcgi",
        PROCESS_CGI: "//ssl.gongyi.qq.com/cgi-bin/WXUnprocessV2",
        RATE_CGI: "//ssl.gongyi.qq.com/cgi-bin/WXUpdProcessLikes",
        LA_LEVEL_CGI: "//ssl.gongyi.qq.com/cgi-bin/gy_user_extra_display.fcgi"
    },
    G_SRCS = {
        SWIPER_JS: "//ssl.gongyi.qq.com/js/static/lib/swiper.jquery.3.3.1.min.js",
        E_CHART_JS: "//gongyi.qq.com/js/m/static/lib/echarts.js?_=" + Math.round((new Date).getTime() / 6e4).toString()
    },
    EventEmmiter = function() {
        function t(t) {
            void 0 === t && (t = null),
            this._evts_register = {},
            this._init(t)
        }
        return t.prototype._init = function(t) {
            void 0 === t && (t = null)
        },
        t.prototype.on = function(t, e) {
            var a = this._evts_register[t] || [];
            return a.push(e),
            this._evts_register[t] = a,
            this
        },
        t.prototype.off = function(t, e) {
            var a = this._evts_register[t] = this._evts_register[t] || [];
            if (a && a.length) for (var i = 0,
            n = a.length; i < n; i++) a[i] === e && a.splice(i, 1);
            return this
        },
        t.prototype.trigger = function(t, e) {
            void 0 === e && (e = null);
            var a = {
                type: t,
                returnValue: e,
                currentTarget: this
            };
            return this.triggerEvent(a),
            this
        },
        t.prototype.triggerEvent = function(t) {
            t.currentTarget || (t.currentTarget = this);
            var e = this._evts_register[t.type] || [],
            a = this;
            return e && e.length ? (e.forEach(function(e) {
                t.cancelable || e.call(a, t)
            }), this) : this
        },
        t
    } (),
    IDMaker = function() {
        function t() {}
        return t.id = function(e, a) {
            return (e || "") + t._idx+++(a || "")
        },
        t._idx = 0,
        t
    } (),
    G_NAV_SEL_CLS = "tabHd-item__on",
    PageObject = function() {
        function t(t) {
            this.init(t)
        }
        return t.prototype.init = function(t) {},
        t
    } (),
    Page = function(t) {
        function e(e) {
            var a = t.call(this, e) || this;
            return a._status_data = {},
            a._idx = 0,
            a
        }
        return __extends(e, t),
        e.prototype._send_to_named_target = function(t, e) {
            var a = this._named_objs[t];
            a && a.on_msg && a.on_msg(e, this)
        },
        e.prototype._set_stat_data = function(t, e) {
            return t && (this._status_data[t] = e),
            this
        },
        e.prototype._get_stat_data = function(t) {
            if (t) return this._status_data[t]
        },
        e.prototype.init = function(t) {
            this._evt_disp = new EventEmmiter,
            this._named_objs = {},
            this._init_opt = t
        },
        e.prototype.initPage = function() {
            this.trigger("pageInit")
        },
        e.prototype.addModule = function(t) {
            for (var e = this,
            a = [], i = 1; i < arguments.length; i++) a[i - 1] = arguments[i];
            if (this._idx++, t.name || (t.name = "_m_" + this._idx), this._named_objs[t.name] = t, t.on || (t.on = function(a, i) {
                return e.on(a, i),
                t
            },
            t.off = function(a, i) {
                return e.off(a, i),
                t
            },
            t.trigger = function(a, i) {
                void 0 === i && (i = null);
                var n = {
                    type: a,
                    returnValue: i,
                    currentTarget: t,
                    target: t
                };
                e.triggerEvent(n)
            },
            t.send_to = function(a, i) {
                var n = {
                    type: "_msg_",
                    returnValue: i,
                    currentTarget: t,
                    target: t
                };
                e._send_to_named_target(a, n)
            },
            t.setValue = function(t, a) {
                e._set_stat_data(t, a)
            },
            t.getValue = function(t) {
                return e._get_stat_data(t)
            },
            t.nextFrame = function(t, e) {
                window.requestAnimationFrame ? requestAnimationFrame(function() {
                    t.call(e)
                }) : setTimeout(function() {
                    t.call(e)
                },
                40)
            }), t.init && t.init(this._init_opt), t.evts) {
                var n = function(e) {
                    o.on(e,
                    function(a) {
                        t.evts[e].call(t, a)
                    })
                },
                o = this;
                for (var r in t.evts) n(r)
            }
            if (this.trigger("on-module", t), a.length) for (; a.length;) this.addModule(a.shift());
            return this
        },
        e.prototype.on = function(t, e) {
            return this._evt_disp.on(t, e),
            this
        },
        e.prototype.off = function(t, e) {
            return this._evt_disp.off(t, e),
            this
        },
        e.prototype.trigger = function(t, e) {
            return void 0 === e && (e = null),
            this._evt_disp.trigger(t, e),
            this
        },
        e.prototype.triggerEvent = function(t) {
            return t.currentTarget && t.currentTarget != this._evt_disp || (t.currentTarget = this),
            !t.target && (t.target = this),
            this._evt_disp.triggerEvent(t),
            this
        },
        e
    } (PageObject),
    gMainUiContainer = $("#pageContainer"),
    page = new Page;
    page.addModule({
        name: "args_init",
        init: function() {
            "wx" == GY.browser.client && GY.Busi.js_conf.init(),
            this.init_args()
        },
        evts: {
            baseData: function(t) {
                var e = t.returnValue;
                e && (GY.Busi.sns.init({
                    img_url: e.base.listImg + "/200",
                    link: location.protocol + "//" + location.host + location.pathname + "?showwxpaytitle=1&et=fx&pid=" + e.base.id,
                    desc: "我支持【" + e.base.title + "】公益筹款，捐款或转发都是献爱心！",
                    tdesc: "我支持【" + e.base.title + "】公益筹款，捐款或转发都是献爱心！",
                    title: "腾讯公益 爱在一起",
                    mta: {
                        t: "detailshare",
                        fr: "true",
                        tl: "true"
                    }
                }), GY.Busi.sns.share())
            }
        },
        init_args: function() {
            this.setValue("proto", location.protocol);
            var t = /(^|\s|;)MicroMessenger\/([^\s;]+)/i.test(navigator.userAgent) ? "wx": "mq",
            e = GY.Util.uri.getUriPar("et") || GY.Util.uri.getUriPar("ET") || ("_WX" == GY.Util.uri.getUriPar("inbank") ? "wxdetl": "") || "h5detl",
            a = GY.Util.uri.getUriPar("gt") || GY.Util.uri.getUriPar("GT") || e,
            i = GY.Util.uri.getUriPar("pid") || "",
            n = GY.Util.uri.getUriPar("p") || "",
            o = navigator.userAgent,
            r = o.indexOf("Android") > -1 || o.indexOf("Adr") > -1,
            s = (location.hash || " ").substr(1); ! i && (i = GY.Util.uri.getHashPar("id")),
            !n && (n = GY.Util.uri.getHashPar("pos"));
            GY.Util.uri.getHashPar("p");
            if (IDPAIRS[i]) {
                var l = IDPAIRS[i];
                location.assign(location.href.replace(/(\?|&)pid=[^&#]+/gi, "$1pid=" + l).replace(/((&)|(%26))id((=)|(%3d))([^&#]+)/i, "$1id$4" + l)),
                /((&)|(%26))id((=)|(%3d))([^&#]+)/gi.test(location.href) && location.assign("?pid=" + l + "&et=fx.rd")
            }
            n = n || "detail",
            i && !isNaN(i) && i - 0 == i || this.trigger("error", {
                type: 1
            });
            for (var c in G_CGI_SWITCH)"PRO_CGI" != c && (G_CGI_SWITCH[c] && G_CGI_SWITCH[c] < 1 ? G_CGI_SWITCH[c] = Math.random() <= G_CGI_SWITCH[c] : G_CGI_SWITCH[c] = 0 != G_CGI_SWITCH[c]);
            if (GY.tpl.$G.client = t, GY.tpl.$G.no_share = !0, this.setValue("ARGS", {
                id: i,
                pos: n,
                etag: e,
                client: t,
                hash: s,
                ua: o,
                isAndroid: r,
                gtag: a
            }), GY.tpl.$G.htmlSafe = htmlspecialchars, GY.tpl.$G.uri_decode = decode, GY.tpl.$G.fixUrlProto = fixUrlProto, GY.tpl.$G.numfmt = function(t) {
                if (t -= 0, isNaN(t)) return t;
                t = t.toFixed(2);
                var e = t.split("."),
                a = t;
                return e.length > 1 && (a = GY.Util.number.format(e[0]) + (e[1] - 0 ? "." + e[1] : "")),
                a
            },
            !GY.user || !GY.user.uid) try {
                GY.Busi.authorize.auth && GY.Busi.authorize.auth({})
            } catch(d) {}
        }
    }).addModule({
        name: "data",
        _idx: 0,
        evts: {
            pageInit: function(t) {
                this.getValue("proto");
                this._fetch_base()
            },
            load_data: function(t) {
                var e = this;
                switch (t.returnValue) {
                case "j-progress":
                    G_CGI_SWITCH.FINANCE || G_CGI_SWITCH.PROCESS ? (console.log("###进展模块都展示"), G_CGI_SWITCH.FINANCE ? (this._fetch_finance(this.getValue("ARGS").id), $('[data-scrollclass="j-progress"]').text("进展")) : this._fetch_process(this.getValue("ARGS").id)) : (console.log("进展模块都不展示"), $('.tabHd-item[data-scrollclass="j-progress"],.j-progress').remove(), this.nextFrame(function() {
                        e.trigger("rmv_anchor", "j-progress"),
                        e.trigger("dom_changed")
                    }));
                    break;
                case "j-track":
                    G_CGI_SWITCH.RANK_CGI || G_CGI_SWITCH.TRANS_LIST ? G_CGI_SWITCH.RANK_CGI ? this._fetch_rank_data() : this._fetch_trans_data(2) : ($('.j-track,[data-scrollclass="j-track"]').remove(), this.trigger("rmv_anchor", "j-track"), this.trigger("dom_changed"));
                    break;
                case "j-interact":
                    G_CGI_SWITCH.ATTEST || G_CGI_SWITCH.ENTER_DONATOR ? G_CGI_SWITCH.ATTEST ? this._fetch_attest() : this._fetch_enters() : ($('.j-interact,[data-scrollclass="j-interact"]').remove(), this.nextFrame(function() {
                        e.trigger("rmv_anchor", "j-interact"),
                        e.trigger("dom_changed")
                    }))
                }
            },
            "load-progress": function(t) {
                var e = t.returnValue - 0;
                e <= 1 || this._fetch_process(this.getValue("ARGS").id, e)
            },
            "load-trans-data": function(t) {
                this._fetch_trans_data()
            },
            ui_ready: function() {
                "wx" == this.getValue("ARGS").client && GY.user && GY.user.uid ? this._fetch_friends() : console.log("not customer info:::")
            },
            RATE_PROC: function(t) {
                var e = Math.floor((new Date).getTime() / 1e3),
                a = t.returnValue,
                i = a.pid,
                n = a.procid,
                o = a.dom;
                this._ajx(G_STR_URLS.RATE_CGI,
                function(t) {
                    if (o.prop("disabled", !1), t && !t.code) {
                        var e = o.find("i.ico_thumbUp").addClass("ico_thumbUp_on").siblings("span");
                        e.text((e.data("num") || 0) - 0 + 1)
                    }
                },
                {
                    oid: GY.user.uid,
                    pid: i,
                    fid: n,
                    tst: e,
                    sid: EncodeTmp("PROCESS_LIKE_" + GY.user.uid + "_" + n + "_" + e)
                },
                function(t) {
                    o.prop("disabled", !1)
                })
            },
            get_proj_stat_data: function() {
                this._fetch_proj_stat_data()
            },
            get_la_level: function(t) {
                var e = this,
                a = t.returnValue,
                i = a.postData,
                n = a.dom,
                o = {
                    url: G_STR_URLS.LA_LEVEL_CGI,
                    data: JSON.stringify(i),
                    type: "POST",
                    dataType: "json",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    success: function(t) {
                        return 0 != t.code ? (n.data("loaded", !0), void e.trigger("report", {
                            label: "detail.htm 爱心账户等级获取失败",
                            url: o.url,
                            data: o.data,
                            ret: t
                        })) : void n.each(function(e) {
                            $(this).text("Lv." + t.data.user_list[e].lv).data("loaded", !0).show()
                        })
                    },
                    error: function() {
                        n.data("loaded", !0)
                    }
                };
                GY.Sys.ajax(o)
            },
            report: function(t) {
                var e = t.returnValue,
                a = Object.keys(e).reduce(function(t, a) {
                    var i = e[a];
                    return i = i && "object" == typeof i ? JSON.stringify(i) : i,
                    t + a + ": " + i + "; "
                },
                "");
                a = a.slice(0, -2),
                console.log(a),
                GY.Sys.rpt.info(a, !0)
            }
        },
        init: function(t) {
            console.log("ARGS:", this.getValue("ARGS"))
        },
        _fetch_lstorage_proj: function(t) {
            var e = lstorage("_projs");
            if (!e) return null;
            if (e.length && e.length > PROJ_MAX_CACHED) {
                var a = e[t];
                return a && a.e < (new Date).getTime() && (a = null),
                lstorage("_projs", null, 0),
                a && a.v
            }
            var a = e[t];
            return a && (a.e < (new Date).getTime() ? (delete e[t], e.length--, lstorage("_projs", e), a = null) : a = a.v),
            a
        },
        _cach_proj_rslt: function(t, e) {
            if (e) {
                var a = lstorage("_projs") || {
                    length: 0
                };
                a[t] || a.length++,
                a[t] = {
                    e: (new Date).getTime() + 6e5,
                    v: e,
                    t: Math.floor((new Date).getTime() / 1e3)
                },
                lstorage("_projs", a)
            }
        },
        _fetch_enters: function() {
            var t = this;
            G_CGI_SWITCH.ENTER_DONATOR ? this._ajx(G_STR_URLS.CKV_GET_CGI,
            function(e) {
                e && !e.code ? t.trigger("enters_data", e) : t.trigger("enters_data", 0),
                t.trigger("all_loaded")
            },
            {
                key: "entrepreneurs_" + this.getValue("ARGS").id
            },
            function() {
                t.trigger("enters_data", !1),
                t.trigger("all_loaded")
            }) : (this.trigger("enters_data", null), this.trigger("all_loaded"))
        },
        _fetch_attest: function() {
            var t = this;
            if (G_CGI_SWITCH.ATTEST) {
                var e = this.getValue("attest_post") || {
                    posId: 0,
                    page: 0,
                    block: -1
                },
                a = e.posId,
                i = e.page,
                n = e.block;
                this._ajx(G_STR_URLS.ATTEST_CGI,
                function(e) {
                    e && !e.ret && e.comment && e.comment.length ? (t.setValue("attest_post", {
                        postId: e.pos,
                        page: e.page - 0,
                        block: e.block
                    }), t.trigger("attest_data", e)) : t.trigger("attest_data", {
                        total: 0,
                        comment: [],
                        page: 0
                    }),
                    t._fetch_enters()
                },
                {
                    pos: a,
                    block: n,
                    page: i + 1,
                    tgt: this.getValue("ARGS").id
                },
                function() {
                    t.trigger("attest_data", !1),
                    t._fetch_enters()
                })
            } else this._fetch_enters()
        },
        _fetch_trans_data: function(t, e) {
            var a = this;
            e = e || this.getValue("trans_last_key") || "",
            t = t || 5;
            var i = this.getValue("ARGS").id,
            n = {
                aid: i,
                limit: t
            };
            n.last_key = e,
            G_CGI_SWITCH.TRANS_LIST ? (t = t || 5, this._ajx(G_STR_URLS.TRANS_CGI,
            function(t) {
                if (console.log("###>>>流水数据:", t), t && !t.code && t.msg) t.msg.length ? (a.setValue("trans_last_key", t.msg[t.msg.length - 1].rowkey), a.trigger("trans_data", {
                    msg: t.msg,
                    last_key: e,
                    next_startk: e
                })) : (a.setValue("trans_last_key", null), console.log("###x>>>", t.msg), a.trigger("trans_data", {
                    msg: t.msg,
                    last_key: e,
                    next_startk: e
                }));
                else {
                    if (t || (!t.msg || !t.msg.length) && (t.code = -12)) {
                        if (t.code == -6) return void a.trigger("trans_data", -6);
                        if (t.code == -12) return void a.trigger("trans_data", -12)
                    } ! t || t.code != -2 && t.code != -4 ? a.trigger("trans_data", void 0) : (a.setValue("trans_last_key", e), e ? a.trigger("trans_data", 0) : a.trigger("trans_data", void 0))
                }
            },
            n,
            function(t) {
                e ? a.trigger("trans_data", 0) : a.trigger("trans_data", !1)
            })) : this.trigger("trans_data", G_CGI_SWITCH.TRANS_LIST ? null: 0)
        },
        _fetch_rank_data: function() {
            var t = this;
            if (G_CGI_SWITCH.RANK_CGI) {
                var e = this.getValue("ARGS").id,
                a = "rnk_" + GY.user.uid + "_" + e + "_1",
                i = sstorage(a);
                i ? (this.trigger("rank_data", i), this._fetch_trans_data(2)) : this._ajx(G_STR_URLS.RANK_CGI,
                function(e) {
                    e && !e.code && (e = e.data) && ((e.org || []).length || (e.psnl || []).length || (e.company || []).length) ? (sstorage(a, e), t.trigger("rank_data", e)) : t.trigger("rank_data", 0),
                    t._fetch_trans_data(2)
                },
                {
                    pid: e,
                    proj: e,
                    page: 0,
                    yqj_cache: +this.getValue("baseInfo").base.yqj_cache || 0
                },
                function(e) {
                    t.trigger("rank_data", !1),
                    t._fetch_trans_data(2)
                })
            } else this._fetch_trans_data()
        },
        _fetch_friends: function() {
            var t = this,
            e = "frdl_" + GY.user.uid + "_" + this.getValue("ARGS").id,
            a = sstorage(e);
            a ? this.trigger("friends_list", a) : this._ajx("//ssl.gongyi.qq.com/cgi-bin/WXGetFriendInfo",
            function(a) {
                var i;
                return a && (i = a.data) && (i = i[t.getValue("ARGS").id]) && i.count && (sstorage(e, i), t.trigger("friends_list", i)),
                !0
            },
            {
                oid: GY.user.uid,
                projs: this.getValue("ARGS").id
            },
            function() {
                return ! 0
            })
        },
        _fetch_proj_stat_data: function() {
            var t = this,
            e = G_STR_URLS.G_PROJ_BASE_STAT;
            this._ajx(e,
            function(e) {
                e && !e.code ? t.trigger("proj_stat_data", e.msg) : $(".card-data,.card-progress").hide()
            },
            {
                id: this.getValue("ARGS").id,
                type: "proj_base"
            },
            function() {
                $(".card-data,.card-progress").hide()
            })
        },
        _fetch_base: function() {
            var t = this,
            e = this.getValue("ARGS").id,
            a = this._fetch_lstorage_proj(this.getValue("ARGS").id),
            i = !1;
            a && "V" in a && a.V == PROJ_LC_V && (i = !0, this.trigger("baseData", a));
            var n = 1 == G_CGI_SWITCH.PRO_CGI ? GY.Util.string.format(STATIC_SRC + "", e % 100, e) : G_STR_URLS.G_PROJ_BASE;
            return n ? void this._ajx(n,
            function(e) {
                if (e && !e.code) if (e.msg && e.msg.base && e.msg.base.donate && delete e.msg.base.donate, console.log("BASE### PROJ:", e.msg, G_CGI_SWITCH.PRO_CGI), 2 == G_CGI_SWITCH.PRO_CGI) e.msg.V = PROJ_LC_V,
                t._cach_proj_rslt(t.getValue("ARGS").id, e.msg),
                i || t.trigger("baseData", e.msg);
                else {
                    var a = t.getValue("ARGS").id;
                    if (e && e.base && 1 == e.base.proj_type) return void(location.href = "//ssl.gongyi.qq.com/m/weixin/plansDetail.html#proj=" + a);
                    var n = e;
                    n.detail && (n.detail.desc_module = n.detail.desc_module || {}),
                    e && e.base && (e.base.is_static = 1),
                    e = {
                        msg: e
                    },
                    i || t.trigger("baseData", e.msg);
                    var o = t;
                    t.nextFrame(function() {
                        o.trigger("get_proj_stat_data")
                    })
                }
            },
            {
                id: this.getValue("ARGS").id,
                type: "proj",
                jsoncallback: 1 == G_CGI_SWITCH.PRO_CGI ? "_cb_fn_proj_" + e: ""
            },
            function(e) {
                console.info("项目信息错误：", i, G_CGI_SWITCH.PRO_CGI),
                i || (G_CGI_SWITCH.PRO_CGI++, G_CGI_SWITCH.PRO_CGI <= 2 ? t.nextFrame(function() {
                    t.trigger("pageInit")
                }) : (alert("项目不存在~！"), t.trigger("error", {
                    type: 1,
                    val: e
                })))
            }) : void this.trigger("error")
        },
        _ajx: function(t, e, a, i, n, o) {
            var r = a && a.jsoncallback || IDMaker.id("_cb_fn_");
            a = a || {},
            a.jsoncallback = r,
            n = n || "get",
            window[r] = function(t) {
                e && !e._invoked && (e._invoked = 1) && e(t),
                setTimeout(function() {
                    delete window[r]
                },
                200)
            },
            GY.Sys.ajax({
                url: t,
                data: a,
                type: n,
                jsonpCallback: r,
                dataType: "jsonp",
                success: function(t) {
                    e && !e._invoked && (e._invoked = 1) && e(t)
                },
                error: function(t) {
                    i && i(t)
                },
                complete: function(t) {
                    o && o(t)
                }
            })
        },
        _fetch_finance: function(t) {
            var e = this;
            if (G_CGI_SWITCH.FINANCE) {
                var a = "finance_" + t,
                i = sstorage(a);
                i ? (this.trigger("finance_data", i), G_CGI_SWITCH.PROCESS && this._fetch_process(t)) : this._ajx(G_STR_URLS.FIANCE_CGI,
                function(i) { ! i.code && i.data ? i.data.update_finance_year ? (e.trigger("finance_data", i.data), sstorage(a, i.data)) : e.trigger("finance_data", 0) : e.trigger("finance_data", !1),
                    G_CGI_SWITCH.PROCESS && e._fetch_process(t)
                },
                {
                    pid: t
                },
                function(a) {
                    e.trigger("finance_data", !1),
                    G_CGI_SWITCH.PROCESS && e._fetch_process(t)
                })
            } else this._fetch_process(t)
        },
        _fetch_process: function(t, e) {
            var a = this;
            if (G_CGI_SWITCH.PROCESS) {
                if (e = e || 1, e <= 1) {
                    var i = this.getValue("baseInfo");
                    i.detail.endReport && this.trigger("end_report", i)
                }
                this.getValue("baseInfo").detail.process_total ? this._ajx(G_STR_URLS.PROCESS_CGI,
                function(t) {
                    t && !t.ret ? a.trigger("process_data", {
                        idx: e,
                        data: t.info
                    }) : a.trigger("process_data", {
                        idx: e,
                        data: null
                    })
                },
                {
                    pid: t,
                    row: 2,
                    curr: e,
                    soid: GY.user.uid
                },
                function(t) {
                    a.trigger("process_data", {
                        idx: e,
                        data: null
                    })
                }) : this.trigger("process_data", {
                    idx: e,
                    data: !1
                })
            } else this.trigger("process_data", null)
        }
    }).addModule({
        name: "global_evt",
        evts: {
            ui_ready: function(e) {
                var self = this,
                _a = this.getValue("ARGS"),
                gtag = _a.gtag,
                etag = _a.etag,
                id = _a.id;
                FastClick.attach($(".page-wrapper")[0]),
                gMainUiContainer.on("click", "[data-mta]",
                function(e) {
                    var $this = $(this).closest("[data-mta]"),
                    strMta = $this.data("mta"),
                    strAppend = $this.data("mta-param");
                    if (strMta && window.MtaH5) {
                        if (strAppend) {
                            var s = strAppend;
                            try {
                                strAppend = JSON.parse(strAppend) || eval(strAppend) || null
                            } catch(e) {} (!strAppend || "string" == typeof strAppend || "number" == typeof strAppend) && (strAppend = {},
                            strAppend[s] = !0)
                        }
                        try {
                            MtaH5.clickStat(strMta, strAppend)
                        } catch(e) {}
                    }
                    return ! 0
                }).on("click", "a",
                function(t) {
                    var e, a = $(this).closest("a");
                    if ((e = a.attr("href")) && !/^javascript:/.test(e)) {
                        a.data("et") || etag,
                        a.data("gt") || gtag;
                        a.data("usehash") ? a.attr("href", addHashParams(e, {
                            et: etag,
                            gt: gtag
                        })) : a.attr("href", addUrlParams(e, {
                            et: etag,
                            gt: gtag
                        }))
                    }
                    return e
                }).on("click", ".dataBlock-item [data-dialogid]",
                function(t) {
                    console.log("#####>>>", t);
                    var e = $(this);
                    if (e.closest("i.ico_info").length && e.data("dialogid")) return t.preventDefault(),
                    void console.log("PREVVVV")
                }),
                $(".j-navBar").on("click", ".tabHd-item",
                function(t) {
                    var e = $(this);
                    if (console.log("XXXNige cxx"), e.hasClass(G_NAV_SEL_CLS)) return void console.log("XXEL");
                    e.addClass(G_NAV_SEL_CLS).siblings().removeClass(G_NAV_SEL_CLS);
                    var a = e.data("scrollclass");
                    if (console.log("TARGET", a), a) {
                        var i = $("." + a);
                        i.length && "1" != i.data("dataReady") && (console.log("###TARGET", i), self.trigger("load-dom-data", i)),
                        self.trigger("scroll-to-targ", {
                            target: i,
                            src: e
                        })
                    }
                    return ! 0
                }),
                $(".j-description-viewAll").on("click",
                function(t) {
                    return $(this).parent().hide().parent().css("height", "auto"),
                    self.trigger("dom_changed"),
                    !0
                }),
                $(".j-progress").on("click", ".loadmore",
                function(t) {
                    t.preventDefault();
                    var e = $(this).data("pidx");
                    return e || $(this).addClass("hide1"),
                    $(this).addClass("hide1").siblings(".mod-loading").removeClass("hide1"),
                    self.trigger("load-progress", e),
                    !0
                }),
                $(".j-progress").on("click", ".progress-item .DinC",
                function(t) {
                    var e = $(this),
                    a = e.find("i.ico_thumbUp");
                    if (a.hasClass("ico_thumbUp_on") || e.prop("disabled")) return ! 0;
                    e.prop("disabled", !0);
                    var i = e.data("pid"),
                    n = e.data("procid");
                    return GY.user.uid ? self.trigger("RATE_PROC", {
                        pid: i,
                        procid: n,
                        dom: e
                    }) : GY.Busi.authorize.login(),
                    !0
                }).on("click", ".imgList-item-inner img",
                function(t) {
                    var e = $(this).closest(".imgList").find("img").map(function(t, e) {
                        return ($(this).attr("src") || "").replace(/\/180$/g, "/0")
                    }).get();
                    try {
                        GY.Busi && GY.Busi.img && GY.Busi.img.imagePreview && GY.Busi.img.imagePreview({
                            urls: e,
                            imgUrl: ($(this).attr("src") || "").replace(/\/180$/g, "/0")
                        })
                    } catch(t) {}
                    return ! 0
                }),
                $(".j-track").on("click", ".loadmore",
                function(t) {
                    var e = $(this);
                    if (!e.prop("disabled")) return e.prop("disabled", !0),
                    self.trigger("load-trans-data"),
                    !0
                }),
                $(".j-footBar").on("click", ".m-donate-it",
                function(t) {
                    return GY.wd.donateBox.getPay(),
                    !0
                });
                var all_dtail_imgs;
                $(".description").on("click", ".article img",
                function(t) {
                    var e, a = t.target;
                    if (a && (e = $(a).attr("src"))) {
                        if (!all_dtail_imgs) {
                            all_dtail_imgs = $(".description").find(".article img");
                            var i = [];
                            all_dtail_imgs.length && array_each(all_dtail_imgs,
                            function(t, e) {
                                i.push($(e).attr("src").replace(/\/\d+$/g, "/0"))
                            }),
                            all_dtail_imgs = i
                        }
                        return GY.Busi && GY.Busi.img && GY.Busi.img.imagePreview && GY.Busi.img.imagePreview({
                            urls: all_dtail_imgs,
                            imgUrl: e.replace(/\/\d+$/g, "/0")
                        }),
                        !0
                    }
                })
            }
        },
        init: function() {}
    }).addModule({
        name: "all_ui",
        _img_type: 0,
        _footer: null,
        _top_nav: null,
        _module_cont: {},
        _module_stat: {},
        evts: {
            baseSync: function(t) {},
            proj_stat_data: function(t) {
                var e = t.returnValue,
                a = this.getValue("baseInfo");
                a.stat = e && e.stat || {};
                var i = a.base.status;
                if (e.base) for (var n in e.base)"object" != typeof e.base[n] && (a.base[n] = e.base[n]);
                a = this._calc_proj_num_(a),
                GY.tpl.$G.projInfos = a,
                this.setValue("baseInfo", a),
                this.nextFrame(function() {
                    a.base && (a.base.is_static = !1);
                    var t = GY.tpl.parse("card-aim", a);
                    $(".card-data").replaceWith(t);
                    var e = (a.stat.YqjSponsorPeople || 0) + (a.stat.YqjJoinPeople || 0);
                    $("#yqj_peop_nums").text(e.toString()),
                    $(".card-progress-num").html("&nbsp;&nbsp;" + Math.floor(a.calc.received_percent) + "%");
                    var n = $(".j-progressBarDone").css("width", Math.floor(a.calc.received_percent) + "%");
                    a.calc.received_percent && n.addClass("show"),
                    i != a.base.status && (console.log("状态有改变"), $(".card-state").replaceWith(GY.tpl.parse("tpl-proj-stat-tag", a)), $(".j-footBar").replaceWith(GY.tpl.parse("tpl-footer-btns", a))),
                    $("#amountDescDg").replaceWith(GY.tpl.parse("tpl_amountDescDg", a))
                })
            },
            baseData: function(t) {
                var e = t.returnValue;
                if (e) {
                    var a = e.base;
                    this._img_type = a.img_type
                } else this._img_type = 0;
                var i = this._calc_proj_num_(e);
                GY.tpl.$G.CONF_SWITCH = i.CONF_SWITCH = G_CGI_SWITCH,
                i.detail.process_total = (i.detail.process_total || 0) - 0,
                i.detail.num_procs = i.detail.process_total,
                i.base.status -= 0,
                3 == i.base.status && i.detail.endReport && i.detail.endReport.year && (i.detail.num_procs += 1),
                i.detail.monthReport_total && (i.detail.num_procs += i.detail.monthReport_total),
                i.base.multi_imgs_type = (i.base.multi_imgs_type || 0) - 0,
                this._img_type = i.base.multi_imgs_type,
                console.log("percent:", i),
                this.setValue("baseInfo", i),
                this.show_main(i)
            },
            friends_list: function(t) {
                var e = t.returnValue,
                a = GY.tpl.parse("tp-friends-list", e);
                $("#friends-list").append(a)
            },
            finance_data: function(t) {
                var e = this;
                if (console.log("finance_data", t.returnValue), t.returnValue) {
                    var a = t.returnValue,
                    i = 0;
                    switch (a.fee_style - 0) {
                    case 1:
                        i = a.manage_money + a.donate_cost_money;
                        break;
                    case 2:
                        i = a.manage_money + a.donate_cost_money;
                        break;
                    case 3:
                        i = a.manage_money + a.donate_cost_money + a.proj_exe_money
                    }
                    a.sum_paied = i,
                    a.execute_percent = (100 * i / a.total_raise_money).toFixed(2);
                    var n = GY.tpl.parse("j-finance-data", {
                        finance: a
                    });
                    this._module_stat.process = 1,
                    $(".j-progress").html(n),
                    G_CGI_SWITCH.FINANCE_CHART && this._init_echarts(a)
                } else G_CGI_SWITCH.PROCESS || (console.log("不展示进展。。。"), this.nextFrame(function() {
                    $('.j-progress,[data-scrollclass="j-progress"]').remove(),
                    e.trigger("rmv_anchor", "j-progress"),
                    e.trigger("dom_changed")
                }))
            },
            trans_data: function(t) {
                var e = t.returnValue;
                if (console.log("####流水订单数据=1=", e), e) if ( - 6 == e || -12 == e) {
                    var a = $(".j-track");
                    a.find(".init-loading").length ? a.remove() : ($(".loadmore").addClass("hide1"), $("#trans-flow-hint").removeClass("hide1"))
                } else {
                    var i = e.msg,
                    n = !e.last_key,
                    o = GY.tpl.parse("tmpl_trans", {
                        list: i,
                        _INIT: n
                    }),
                    a = $(".j-track");
                    if (a.find(".init-loading").length) a.html(o);
                    else {
                        var r = a.find("ul.flow");
                        e.last_key && r.length ? r.append(o) : a.append(o)
                    }
                    e.msg && e.msg.length ? $(".j-track .loadmore").prop("disabled", !1) : ($(".j-track .loadmore").addClass("hide1"), $("#trans-flow-hint").removeClass("hide1"))
                } else {
                    console.log("####流水订单数据###====", e);
                    var a = $(".j-track");
                    if (0 === e) console.log("####流水订单数据###2323====", e),
                    a.find(".init-loading").length && (this.trigger("rmv_anchor", ".j-track"), a.remove(), $('[data-scrollclass="j-track"]').remove());
                    else {
                        console.log("####流水订单数据###2323==343==", e);
                        var i = [null],
                        n = !0,
                        s = !0,
                        o = GY.tpl.parse("tmpl_trans", {
                            list: i,
                            _INIT: n,
                            _err: s
                        });
                        a.find(".init-loading").length ? (console.log("####流水订单数据###2323=1343==", o), a.html(o)) : (console.log("####流水订单数据##2323#2323=1343==", o), $(".j-track .loadmore").addClass("hide1"), a.append(o))
                    }
                }
            },
            rank_data: function(t) {
                var e = t.returnValue;
                if (e) {
                    for (var a = (e.items, e.psnl || []), i = e.org || [], n = e.company || [], o = [], r = [[a, i, n], [i, n, a], [n, i, a]], s = void 0, l = 0; l < 3; l++) s = r[l],
                    o.push(s[0].shift() || s[1].shift() || s[2].shift());
                    if (o.length) {
                        var c = GY.tpl.parse("tmpl_rank", {
                            items: o,
                            projInfo: this.getValue("baseInfo")
                        }),
                        d = $(".j-track");
                        d.html(c)
                    }
                } else {
                    var d = $(".j-track");
                    d.find(".init-loading").length && !G_CGI_SWITCH.RANK_CGI
                }
            },
            attest_data: function(t) {
                var e = t.returnValue;
                if (e) {
                    var a = e.comment ? Math.min(e.comment.length, 2) : 0;
                    e.limit = a,
                    e._INIT = e.page <= 1,
                    e.pf = uClient;
                    var i = GY.tpl.parse("tmpl-attest", e),
                    n = $(".j-interact .ico_loading");
                    if (n.length ? (n = n.closest(".cells-wrap"), n.replaceWith(i)) : $(".footPrompt").before(i), a) {
                        var o = {
                            user_list: e.comment.slice(0, a).map(function(t) {
                                return {
                                    user_id: t.oid || 0,
                                    lang: "zh_CN"
                                }
                            })
                        };
                        this.trigger("get_la_level", {
                            postData: o,
                            dom: $(".prover-item .avatar-level[data-loaded=false]")
                        })
                    }
                }
            },
            enters_data: function(t) {
                var e = t.returnValue,
                a = $(".j-interact");
                if (e && !e.code && e.data && e.data.length) {
                    var i = GY.tpl.parse("j-enter", e),
                    n = a.find(".init-loading");
                    n.length ? a.html(i) : a.append(i),
                    a.find(".swiper-slide").length ? this._init_script(G_SRCS.SWIPER_JS,
                    function() {
                        var t = {
                            autoplay: 3e3,
                            autoplayDisableOnInteraction: !1,
                            loop: !0,
                            pagination: ".swiper-pagination",
                            onSlideChangeEnd: function(t) {}
                        };
                        new Swiper(".j-swiper-ent", t)
                    }) : (a.find(".j-swiper-ent").closest(".cells-wrap").remove(), a.children().length || (this.trigger("rmv_anchor", "j-interact"), a.remove(), $('[data-scrollclass="j-interact"]').remove()))
                } else a.find(".init-loading").length && $('.j-interact,[data-scrollclass="j-interact"]').remove()
            },
            end_report: function(t) {
                var e = t.returnValue;
                if (this._module_cont["j-progress"] = this._module_cont["j-progress"] || (this._module_cont["j-progress"] = $(".j-progress")), e) {
                    var a = GY.tpl.parse("j-progress-mod", e.detail);
                    this._module_stat.process ? this._module_cont["j-progress"].append(a) : (this._module_stat.process = 1, this._module_cont["j-progress"].html(a)),
                    this._module_stat["process-ul"] = 1
                }
            },
            process_data: function(t) {
                var e = this,
                a = t.returnValue;
                this._module_cont["j-progress"] = this._module_cont["j-progress"] || (this._module_cont["j-progress"] = $(".j-progress")),
                a && a.data ? (this._module_cont["j-progress"].find(".mod-loading").addClass("hide1"), this.nextFrame(function() {
                    a.data._append_procs = !!e._module_stat["process-ul"];
                    var t = GY.tpl.parse("j-progress-mod", a.data);
                    e._module_stat["process-ul"] ? $("#j-progress-lists ul").append(t) : (e._module_stat.process ? e._module_cont["j-progress"].append(t) : (e._module_stat.process = 1, e._module_cont["j-progress"].html(t)), e._module_stat["process-ul"] = 1),
                    a.data.pages && a.data.pages.total_pages ? e._module_cont["j-progress"].find("ul li").length >= a.data.pages.total ? e._module_cont["j-progress"].find(".loadmore").addClass("hide1") : e._module_cont["j-progress"].find(".loadmore").removeClass("hide1").data("pidx", a.idx - 0 + 1) : e._module_cont["j-progress"].find(".loadmore").addClass("hide1")
                })) : this._module_stat.process || (this._module_stat.process = 1, $('.j-progress,[data-scrollclass="j-progress"]').remove(), this.nextFrame(function() {
                    e.trigger("rmv_anchor", "j-progress"),
                    e.trigger("dom_changed")
                }))
            },
            all_loaded: function() {
                var t = $(".j-navBar .tabHd-item");
                t.length < 4 && $(".j-navBar").hide(),
                $(".footPrompt,page-footLogo").removeClass("hide1")
            },
            lazy_can_load: function(t) {
                this._show_lazy(t.returnValue.item)
            },
            scroll_touch_chged: function(t) {
                this._top_nav && (t.returnValue ? (this._top_nav.addClass("navBar__hide"), 2 == this._img_type && this._footer.addClass("hide")) : (this._top_nav.removeClass("navBar__hide"), 2 == this._img_type && this._footer.removeClass("hide")))
            },
            reached_center: function(t) {
                var e = t.returnValue,
                a = $(e.item);
                if (e.ref || (e.ref = $("#" + a.data("linkid"))), e.ref) {
                    try {
                        var i = e.ref.addClass(G_NAV_SEL_CLS).siblings();
                        i.length && i.removeClass(G_NAV_SEL_CLS)
                    } catch(t) {}
                    a.data("loaded") || (a.data("loaded", 1), this.trigger("load_data", a.data("actor")))
                }
            },
            prepare_block: function(t) {
                var e = this,
                a = t.returnValue,
                i = $(a.item);
                i.data("loaded") || (i.data("loaded", 1), this.nextFrame(function() {
                    e.trigger("load_data", i.data("actor"))
                }))
            }
        },
        _calc_proj_num_: function(t) {
            var e = t;
            return e.stat = e.stat || {
                YqjJoinPeople: 0,
                YqjSponsorPeople: 0,
                donateNum: 0,
                recvedMoney: 0,
                t_yxj_step_money: 0
            },
            e.calc = e.calc || {},
            e.calc.needMoney = e.base.needMoney || e.base.donate && e.base.donate.needMoney,
            e.calc.real_ob_money = (e.stat.recvedMoney || 0) + (e.stat.quota_money || 0) + (e.stat.cur_quota_money || 0),
            e.calc.yqj_num_sponsors = e.stat && e.stat.YqjSponsorPeople || e.base.donate && e.base.donate.YqjSponsorPeople,
            e.calc.yqj_num_joins = e.stat && e.stat.YqjJoinPeople || 0,
            e.calc.real_num_donators = "donateNum" in e.stat ? e.stat.donateNum: (e.base.donate && e.base.donate.donateNum - (e.base.donate.t_yxj_step_num || 0) || 0) - 0,
            e.calc.num_donators = e.stat && "donateNum" in e.stat ? e.stat.donateNum: e.calc.real_num_donators + ((e.base.donate && e.base.donate.t_yxj_step_num || 0) - 0) || e.base.donate && e.base.donate.donateNum || e.calc.real_num_donators + ((e.base.donate && e.base.donate.t_yxj_step_num || 0) - 0),
            e.calc.received_percent = 100,
            e.calc.needMoney > 0 && (e.calc.received_percent = Math.max(0, Math.round(1e4 * e.calc.real_ob_money / e.calc.needMoney) / 100)),
            e
        },
        init: function(t) {
            console.log("Init module")
        },
        _scrpt_ready_calls: {},
        _init_script: function(t, e, a) {
            var i = this;
            this._scrpt_ready_calls[t] || [];
            if (this._scrpt_ready_calls[t]) return void(this._scrpt_ready_calls[t].length ? e && this._scrpt_ready_calls[t].push(e) : e && e());
            this._scrpt_ready_calls[t] = e ? [e] : [],
            a = a || "";
            var n = document.createElement("script");
            n.setAttribute("type", "text/javascript"),
            !n.readyState && (n.readyState = "loaded"),
            n.setAttribute("name", t),
            n.onload = n.readystatechange = function(t) {
                if ("loaded" == n.readyState || "complete" == n.readyState) {
                    for (var e = $(this).attr("name"), a = i._scrpt_ready_calls[e], o = 0, r = a.length; o < r; o++) a[o](n);
                    i._scrpt_ready_calls[e] = [],
                    $(this).remove(),
                    n.onload = n.readystatechange = null
                }
            },
            n.setAttribute("src", t),
            a && n.setAttribute("charset", a),
            this.nextFrame(function() {
                document.getElementsByTagName("head")[0].appendChild(n)
            })
        },
        _init_echarts: function(t) {
            var e = function() {
                var e = [];
                switch (t.fee_style - 0) {
                case 1:
                    e.push({
                        name:
                        "公募管理费",
                        value: (100 * t.manage_money / t.sum_paied).toFixed(2),
                        color: "#ff5d38"
                    }),
                    e.push({
                        name: "执行成本与项目支出",
                        value: (100 * t.donate_cost_money / t.sum_paied).toFixed(2),
                        color: "#faa956"
                    });
                    break;
                case 2:
                    e.push({
                        name:
                        "公募管理费与执行成本",
                        value: (100 * t.manage_money / t.sum_paied).toFixed(2),
                        color: "#ff5d38"
                    }),
                    e.push({
                        name: "项目支出",
                        value: (100 * t.donate_cost_money / t.sum_paied).toFixed(2),
                        color: "#faa956"
                    });
                    break;
                case 3:
                    e.push({
                        name:
                        "公募管理费",
                        value: (100 * t.manage_money / t.sum_paied).toFixed(2),
                        color: "#ff5d38"
                    }),
                    e.push({
                        name: "项目支出",
                        value: (100 * t.donate_cost_money / t.sum_paied).toFixed(2),
                        color: "#faa956"
                    }),
                    e.push({
                        name: "执行成本",
                        value: (100 * t.proj_exe_money / t.sum_paied).toFixed(2),
                        color: "#fbc84c"
                    })
                }
                return pieChart(e, "pieChart", "项目支出"),
                !0
            };
            this._init_script(G_SRCS.E_CHART_JS, e)
        },
        show_main: function(t) {
            var e = this;
            if (!this._inited) {
                GY.tpl.$G.projInfos = t;
                var a = GY.tpl.parse("tpl-main", t);
                this.nextFrame(function() {
                    $(document.body).css("padding", "auto"),
                    gMainUiContainer.html(a),
                    e._footer = $(".j-footBar"),
                    e._top_nav = $(".j-navBar");
                    var i = $(".description");
                    i.length && i.get(0).scrollHeight - 2 <= i.eq(0).offset().height && (i.css("height", "auto"), i.find(".description-mask").hide());
                    var n;
                    e._top_nav.find(".tabHd-item").each(function(t, e) {
                        e = $(e);
                        var a = e.attr("id") || IDMaker.id("_tmp_id_"),
                        i = $("." + e.data("scrollclass"));
                        i.data("linkid", a).data("actor", e.data("scrollclass")),
                        e.attr("id", a),
                        n = n ? n.add("." + e.data("scrollclass")) : i
                    }),
                    GY.wd.donateBox.initPay({
                        proj: t,
                        success: function(t) {
                            GY.wd.dialog.loading({
                                msg: "支付确认中...",
                                isText: 1
                            }),
                            setTimeout(function() {
                                GY.wd.dialog.hideLoading(),
                                location.href = "/m/weixin/thanks.html?transcode=" + t.info.transcode + "&pid=" + t.info.id
                            },
                            1e3)
                        },
                        month: 1,
                        rel_1v1: 1
                    }),
                    $(".wx_pay .fix_input .block").attr({
                        "data-mta": "dtl",
                        "data-mta-param": "25"
                    }),
                    $(".wx_pay #moneyInput").attr({
                        "data-mta": "dtl",
                        "data-mta-param": "26"
                    }),
                    $(".wx_pay #btn_submit").attr({
                        "data-mta": "dtl",
                        "data-mta-param": "27"
                    });
                    var o; ! t.base.multi_imgs_type || (o = t.base[2 == t.base.multi_imgs_type ? "img_list": "img_mob_list"]) && 1 == o.length && !t.base.video ? e._show_lazy($(".swiper-lazy")) : e._init_lazy(t.base),
                    e.trigger("add_anchor_itm", n),
                    e._inited = !0,
                    e.trigger("ui_ready")
                })
            }
        },
        _init_lazy: function(t) {
            var e = this;
            $(".j-card .swiper-wrapper").children(".swiper-slide").length > 1 && this._init_script(G_SRCS.SWIPER_JS,
            function() {
                var a = {
                    autoplay: !1,
                    autoplayDisableOnInteraction: !1,
                    loop: !1,
                    pagination: ".swiper-pagination",
                    onSlideChangeEnd: function(t) {
                        e._show_lazy($(t.slides[t.activeIndex]).find(".swiper-lazy").not("[data-loaded]")),
                        player && 0 !== t.activeIndex && player.pause()
                    }
                };
                new Swiper(".j-swiper1", a),
                t.video ? initVideoPlayer(t.video, t.videoPic + "/0") : e._show_lazy($(".swiper-lazy1").not("[data-loaded]"))
            })
        },
        _show_lazy: function(t) {
            t.each(function(t, e) {
                e = $(e),
                e.data("src") && !e.data("loaded") && (e.data("loaded", "-"), e.on("load",
                function(t) {
                    var a = $(".swiper-lazy" + e.data("index")).parent(".swiper-slide");
                    a.find(".swiper-lazy-preloader").remove(),
                    e.data("loaded", 1),
                    a.css("background-image", "url(" + e.attr("src") + ")"),
                    e.next().remove()
                }).on("error",
                function(t) {
                    e.data("loaded", -1),
                    e.off("load").off("error")
                }).attr("src", e.data("src")))
            })
        }
    }).addModule({
        name: "scroll_job",
        _lazy_imgs: new Array,
        _last_top: document.documentElement.clientHeight || window.innerHeight,
        _ht: 0,
        _cap_ht: 46,
        _scrollHt: document.body && document.body.scrollHeight || document.body.offsetHeight,
        _anchors: new Array,
        _locked_scroll_watch: 0,
        evts: {
            add_lazy_itm: function(t) {
                var e = this,
                a = t.returnValue;
                $(a).each(function(t, a) {
                    return e._lazy_imgs.push({
                        item: $(a),
                        pos: $(a).offset().top
                    }),
                    !0
                }),
                this._sort_list(this._lazy_imgs),
                this._chk_itm_pos(!1, 1)
            },
            add_anchor_itm: function(t) {
                var e = this,
                a = t.returnValue;
                $(a).each(function(t, a) {
                    return e._anchors.push({
                        item: $(a),
                        pos: $(a).offset().top
                    }),
                    !0
                }),
                this._sort_list(this._anchors),
                this._chk_itm_pos(!1, 2)
            },
            rmv_anchor: function(t) {
                var e = t.returnValue;
                if (this._anchors.length) for (var a = this._anchors.length; --a >= 0;) if (this._anchors[a].item.hasClass(e)) {
                    this._anchors.splice(a, 1);
                    break
                }
            },
            dom_changed: function() {
                this._scrollHt = document.body && document.body.scrollHeight || document.body.offsetHeight,
                this._sort_list(this._anchors, !0),
                this._sort_list(this._lazy_imgs, !0)
            },
            "scroll-to-targ": function(t) {
                var e = this,
                a = t.returnValue,
                i = a.target,
                n = a.src;
                console.log("SSS", i, n),
                i && i.length && (console.log("cap height", this._cap_ht), this._locked_scroll_watch = 1, this.trigger("reached_center", i), document.body.scrollTop = i.offset().top - this._cap_ht, this.nextFrame(function() {
                    e._locked_scroll_watch = 0
                }))
            }
        },
        _sort_list: function(t, e) {
            return e = !!e,
            t.sort(function(t, a) {
                return e && (t.pos = $(t.item).offset().top, a.pos = $(a.item).offset().top),
                t.pos < a.pos ? 1 : t.pos == a.pos ? 0 : -1
            })
        },
        init: function() {
            var t = this,
            e = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
            if (e) {
                var a = new e(function(e) {
                    t.nextFrame(function() {
                        t._scrollHt = document.body && document.body.scrollHeight || document.body.offsetHeight,
                        t._check(!0)
                    })
                });
                a.observe(gMainUiContainer.get(0), {
                    childList: !0,
                    subtree: !0
                })
            }
            this._ht = document.documentElement.clientHeight || window.innerHeight,
            this._last_top = document.body && document.body.scrollTop || window.scrollY;
            var i = function(e) {
                return t._locked_scroll_watch ? void console.log("locked scrolling") : (t.nextFrame(function() {
                    var e = t._last_top,
                    a = -(t._last_top - (t._last_top = document.body && document.body.scrollTop || window.scrollY));
                    t.dispatch_scroll(t._last_top, a),
                    0 != a && (0 != e && t._last_top <= 0 ? t.trigger("scroll_touch_chged", 1) : !e && t._last_top && (t.trigger("scroll_touch_chged", 0), t._last_top + t._ht >= t._scrollHt - 5 && t.trigger("scroll_touch_chged", !1)))
                }), !0)
            };
            this.getValue("ARGS").isAndroid && (i = GY.rateControll(i, .3)),
            $(window).on("scroll", i)
        },
        _check: function(t, e) {
            if (void 0 === t && (t = !1), void 0 === e && (e = 3), 1 & e && this._lazy_imgs.length) for (var a = this._lazy_imgs.length,
            i = void 0; a > 0;) if (i = this._lazy_imgs[--a], !t && i.pos || (i.pos = $(i.item).offset().top), this._chk_itm_pos(i, !0)) this._lazy_imgs.splice(a, 1),
            this.trigger("lazy_can_load", i);
            else if (!t) continue;
            if (2 & e && this._anchors.length) if (this._last_top <= 4) this.trigger("reached_center", this._anchors[this._anchors.length - 1]),
            this._anchors.length > 1 && this.trigger("prepare_block", this._anchors[this._anchors.length - 2]);
            else if (this._last_top + this._ht >= this._scrollHt - 5) this.trigger("reached_center", this._anchors[0]);
            else {
                for (var a = this._anchors.length,
                i = void 0,
                n = void 0,
                o = void 0; a > 0;) if (i = this._anchors[--a], !t && i.pos || (i.pos = $(i.item).offset().top), this._chk_itm_pos(i)) $(i.item).data("loaded") || this.trigger("prepare_block", i),
                n = i;
                else if (n && !o && (o || $(i.item).data("loaded") || (o = i)), o && !t) break;
                n && this.trigger("reached_center", n),
                o && this.trigger("prepare_block", o)
            }
        },
        _chk_itm_pos: function(t, e) {
            return void 0 === e && (e = !1),
            e ? t.pos <= this._last_top + this._ht + 10 : t.pos <= this._last_top + .5 * this._ht + 10
        },
        dispatch_scroll: function(t, e) {
            var a = this;
            this.nextFrame(function() {
                a._check()
            })
        }
    }).initPage()
};
$(fnMain);
/**
 * @customer wjs
 * @time 2018-02-28 14:16
 */
