<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>商品类别</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/js/h5/jquery-weui1.1.2/weui.min.css">
    <link rel="stylesheet" href="/js/h5/jquery-weui1.2.0/css/jquery-weui.min.css">
    <link href="/css/h5_css/bootstrap3.3.7/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/h5_css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/h5_css/main.css">
    <link rel="stylesheet" href="/css/h5_css/class.css">
    <link rel="stylesheet" href="/css/h5_css/theme-color.css">
    <link rel="stylesheet" href="/css/h5_css/common.css">
    <link rel="stylesheet" href="/css/h5_css/goods_list.css">
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
	
</head>
<body>
<header class="zyw-header">
    <div class="zyw-container white-color">
        <div class="head-l"><a href="javascript:window.history.back(-1)" target="_self"><img src="/img/h5_img/img/svg/head-return.png" alt=""></a></div>
        <div class="head-search">
            <i class="fa fa-search" aria-hidden="true"></i>
            <input type="text" placeholder="输入您当前要搜索的商品" class="white-color">
        </div>
        <div class="head-r"><a href="">取消</a></div>
    </div>
</header>
<div class="butom_f">
    <div class="num_price">
        <div class="count_num" style=" width: 3.6rem;height: 3.6rem;margin: 0 1.4rem; background: url(/img/h5_img/img/cart.png) no-repeat; background-size: contain;position: relative;"
		data-type="0"><span>0</span></div>
        <p class="price">0</p>
    </div>
  <a href="/api/CustnmerH5/cart_h5" class="submit">去结算</a>
</div>
<!-- 中间内容-->
<div class="content">
    <ul class="type_list">
	
        <li class="select"><span></span>休闲食品</li>
        <li><span></span>方便速食</li>
        <li><span></span>乳品饮料</li>
        <li><span></span>我尝购买</li>
        <li><span></span>全部商品</li>
    </ul>
    <ul class="item_list" >
        <div class="item_type type1" data-type="休闲食品">休闲食品</div>
        <li>
            <div class="item_img"><img src="/img/h5_img/img/food.png"/></div>
            <div class="item_content">
                <p class="item_title">疯狂半价</p>
                <p class="item_activity">限时特价</p>
                <p class="item_price"><span>8.01</span><s>8.09</s></p>
            </div>
            <div class="calc">
                <p class="item_sub" onclick="num_sub(this)"></p>
                <p class="item_num">0</p>
                <p class="item_add" onclick="num_add(this)"></p>
            </div>
        </li>
        <li>
            <div class="item_img"><img src="/img/h5_img/img/food.png"/></div>
            <div class="item_content">
                <p class="item_title">疯狂半价</p>
                <p class="item_activity">限时特价</p>
                <p class="item_price"><span>8.01</span><s>8.09</s></p>
            </div>
            <div class="calc">
                <p class="item_sub" onclick="num_sub(this)"></p>
                <p class="item_num">0</p>
                <p class="item_add" onclick="num_add(this)"></p>
            </div>
        </li>
 <li>
            <div class="item_img"><img src="/img/h5_img/img/food.png"/></div>
            <div class="item_content">
                <p class="item_title">疯狂半价</p>
                <p class="item_activity">限时特价</p>
                <p class="item_price"><span>8.01</span><s>8.09</s></p>
            </div>
            <div class="calc">
                <p class="item_sub" onclick="num_sub(this)"></p>
                <p class="item_num">0</p>
                <p class="item_add" onclick="num_add(this)"></p>
            </div>
        </li> <li>
            <div class="item_img"><img src="/img/h5_img/img/food.png"/></div>
            <div class="item_content">
                <p class="item_title">疯狂半价</p>
                <p class="item_activity">限时特价</p>
                <p class="item_price"><span>8.01</span><s>8.09</s></p>
            </div>
            <div class="calc">
                <p class="item_sub" onclick="num_sub(this)"></p>
                <p class="item_num">0</p>
                <p class="item_add" onclick="num_add(this)"></p>
            </div>
        </li> <li>
            <div class="item_img"><img src="/img/h5_img/img/food.png"/></div>
            <div class="item_content">
                <p class="item_title">疯狂半价</p>
                <p class="item_activity">限时特价</p>
                <p class="item_price"><span>8.01</span><s>8.09</s></p>
            </div>
            <div class="calc">
                <p class="item_sub" onclick="num_sub(this)"></p>
                <p class="item_num">0</p>
                <p class="item_add" onclick="num_add(this)"></p>
            </div>
        </li> <li>
            <div class="item_img"><img src="/img/h5_img/img/food.png"/></div>
            <div class="item_content">
                <p class="item_title">疯狂半价</p>
                <p class="item_activity">限时特价</p>
                <p class="item_price"><span>8.01</span><s>8.09</s></p>
            </div>
            <div class="calc">
                <p class="item_sub" onclick="num_sub(this)"></p>
                <p class="item_num">0</p>
                <p class="item_add" onclick="num_add(this)"></p>
            </div>
        </li> <li>
            <div class="item_img"><img src="/img/h5_img/img/food.png"/></div>
            <div class="item_content">
                <p class="item_title">疯狂半价</p>
                <p class="item_activity">限时特价</p>
                <p class="item_price"><span>8.01</span><s>8.09</s></p>
            </div>
            <div class="calc">
                <p class="item_sub" onclick="num_sub(this)"></p>
                <p class="item_num">0</p>
                <p class="item_add" onclick="num_add(this)"></p>
            </div>
        </li>
    </ul>
</div>
<footer class="zyw-footer">
    <div class="zyw-container white-bgcolor">
        <div class="weui-tabbar">
         <!--   <a href="../shop1/index.html" class="weui-tabbar__item">
                <div class="weui-tabbar__icon">
                    <img src="/img/svg/foot-1.png" alt="">
                </div>
                <p class="weui-tabbar__label">首页</p>
            </a>-->
            <a href="/api/CustnmerH5/Class_h5" class="weui-tabbar__item weui-bar__item--on">
                <div class="weui-tabbar__icon">
                    <img src="/img/h5_img/img/svg/foot-2-1.png" alt="">
                </div>
                <p class="weui-tabbar__label">分类</p>
            </a>
         <!--  <a href="../shop3/find.html" class="weui-tabbar__item">
                <div class="weui-tabbar__icon">
                    <img src="/img/svg/foot-3.png" alt="">
                </div>
                <p class="weui-tabbar__label">发现</p>
            </a>-->
            <a href="/api/CustnmerH5/cart_h5" class="weui-tabbar__item">
                <!-- <span class="weui-badge" style="position: absolute;top: -.4em;right: 1em;">0</span> -->
                <div class="weui-tabbar__icon">
                    <img src="/img/h5_img/img/svg/foot-4.png" alt="">
                </div>
                <p class="weui-tabbar__label" id="cart" >购物车</p>
            </a>
            <a href="/api/CustnmerH5/home_h5" class="weui-tabbar__item">
                <div class="weui-tabbar__icon">
                    <img src="/img/h5_img/img/svg/foot-5.png" alt="">
                </div>
                <p class="weui-tabbar__label"id="my_home" >我的</p>
            </a>
        </div>
    </div>
</footer>

<script src="/js/h5/jquery-weui1.11.0/jquery.min.js"></script>
<script src="/js/h5/jquery-weui1.2.0/js/jquery-weui.min.js"></script>
<script src="/js/h5/bootstrap.min.js"></script>
 <script src="/js/h5/jquery.min.js"></script>
 <script src="/js/h5/jquery.fly.min.js"></script>
<script>
    var header = $(".header").height();
    var footer = $(".footer").height();
    var window11 = $(window).height();
    window11 = window11-header-100;
    var offset = $('.num_price').offset();
//    设置产品列表可视区域高度
    $(".item_list").css('height',window11+'px');
//    左侧产品类型选择
    $('.type_list li').click(function(){
        $('.type_list li').removeClass('select');
        $(this).addClass('select');
    })
//    点击添加效果
    $('.item_add').click(function (event){
//        alert('sdf');
        var thisItem = $(this);
        var flyer = thisItem.clone().css({"background":"#000", "width": "20px", "height": "20px","border-radius": "20px"});
        flyer.fly({
            start: {
                width: 20,
                height:20,
                left: event.pageX - 20,
                top: event.pageY - 20
            },
            end: {
                left: offset.left + 40,
                top: offset.top + 0,
                width: 20,
                height:20
            },
            onEnd: function () {
//                $('.end').css({
//                    background: 'red'
//                });
//                setTimeout(function () {
//                    $('.end').css({
//                        background: 'blue'
//                    });
//                }, 200);
                this.destory();
            },
//      autoPlay: false,//是否直接运动,默认true
            speed: 1.1, //越大越快，默认1.2
            vertex_Rtop: 100,//运动轨迹最高点top值，默认20
      onEnd: function(){
          flyer.remove();
      } //结束回调
        });
    });
    $(".count_num").click(function(){
        var this_type = parseInt($(this).attr('data-type'));
        if(this_type == 0){
            var height = parseInt($(".select_list_parent").height());
            $(".select_list_parent").css('top','calc(100% - '+(height+60)+'px)');
            $(this).attr('data-type','1')
        }else{
            $(".select_list_parent").css('top','100%');
            $(this).attr('data-type','0')
        }

    })
    var count_num = 0;
    var parice = 0;
    var this_parice;
    var this_num;
    function num_add(on_this){
//        总数和总价格
        count_num++;
        $('.count_num span').html(count_num);
        this_parice = $(on_this).parent().parent().children('.item_content').children('.item_price').children('span').text();
        this_parice = parseFloat(this_parice);
        parice += this_parice;
        $('.price').html(parice.toFixed(2));
//        当前商品数量
        this_num = $(on_this).parent().parent().children('.calc').children('.item_num');
        var get_this_num = parseInt(this_num.text())+1;
        this_num.html(get_this_num);
        this_num.parent().addClass('select');
    }
    function num_sub(on_this){
//        总数和总价格
        count_num--;
        $('.count_num span').html(count_num);
        this_parice = $(on_this).parent().parent().children('.item_content').children('.item_price').children('span').text();
        this_parice = parseFloat(this_parice);
        parice -= this_parice;
        $('.price').html(parice.toFixed(2));
//        当前商品数量
        this_num = $(on_this).parent().parent().children('.calc').children('.item_num');
        var get_this_num = parseInt(this_num.text())-1;
        this_num.html(get_this_num);
        if(get_this_num == 0){
            this_num.parent().removeClass('select');
        }

    }
    
    
</script>

</body>
</html>